# Tiny Watch Party - 動作確認手順書

## 📋 概要

この手順書では、Tiny Watch Party Chrome拡張機能のMVP版の動作確認方法を説明します。

## 🚀 事前準備

### 必要な環境
- Google Chrome ブラウザ（最新版推奨）
- 拡張機能の開発者モード有効化権限

## 📦 Chrome拡張機能のインストール

### 1. 拡張機能管理画面を開く
1. Chrome ブラウザを開く
2. アドレスバーに `chrome://extensions/` を入力してEnter
3. または、Chrome メニュー → その他のツール → 拡張機能

### 2. 開発者モードを有効化
1. 拡張機能管理画面の右上にある「デベロッパーモード」トグルをONにする

### 3. 拡張機能を読み込む
1. 「パッケージ化されていない拡張機能を読み込む」ボタンをクリック
2. ファイル選択ダイアログで `extension/` フォルダを選択
3. 「フォルダーの選択」をクリック

### 4. インストール確認
- 拡張機能一覧に「Tiny Watch Party - Sidebar MVP」が表示されることを確認
- Chromeツールバーに拡張機能アイコンが表示されることを確認

## ✅ 基本機能テスト

### テスト1: サイドバー表示・非表示

#### 手順
1. 任意のWebサイト（例：https://www.google.com）にアクセス
2. **方法A**: ツールバーの拡張機能アイコンをクリック
3. **方法B**: キーボードで `Alt + Shift + C` を押す

#### 期待結果
- ✅ 右側に360px幅のサイドバーが表示される
- ✅ ページコンテンツが360px左にシフトする
- ✅ 再度同じ操作でサイドバーが非表示になる
- ✅ 非表示時はページが元の幅に戻る

### テスト2: メッセージ投稿機能

#### 手順
1. サイドバーを表示状態にする
2. 下部の入力欄に「テストメッセージ1」と入力
3. **方法A**: Enterキーを押す
4. **方法B**: 「送信」ボタンをクリック
5. 続けて「テストメッセージ2」を投稿

#### 期待結果
- ✅ メッセージがタイムライン（中央部）に表示される
- ✅ タイムスタンプ（HH:MM:SS形式）が付与される
- ✅ 入力欄が自動でクリアされる
- ✅ 新しいメッセージが下部に追加される
- ✅ タイムラインが自動で最新メッセージまでスクロールする

### テスト3: データ永続化

#### 手順
1. 複数のメッセージを投稿（3〜5件程度）
2. サイドバーを非表示にする
3. ページをリロード（F5またはCtrl+R）
4. サイドバーを表示する

#### 期待結果
- ✅ 投稿したメッセージが全て復元される
- ✅ サイドバーの表示状態が保持される（リロード前に非表示なら非表示のまま）
- ✅ タイムスタンプも正しく復元される

## 🌐 互換性テスト

### 異なるサイトでの動作確認

以下のサイトで基本機能が正常に動作することを確認：

#### テストサイト一覧
- [ ] **Google**: https://www.google.com
- [ ] **YouTube**: https://www.youtube.com
- [ ] **GitHub**: https://github.com
- [ ] **Wikipedia**: https://ja.wikipedia.org
- [ ] **Twitter/X**: https://twitter.com

#### 各サイトで確認項目
- [ ] サイドバーの表示・非表示
- [ ] ページレイアウトの調整（360px左シフト）
- [ ] メッセージ投稿
- [ ] データ永続化
- [ ] CSS競合の有無

## 🛠️ トラブルシューティング

### よくある問題と解決方法

#### 1. 拡張機能が読み込めない
**症状**: 「パッケージ化されていない拡張機能を読み込む」でエラーが出る
**解決方法**: 
- `extension/` フォルダが正しく選択されているか確認
- `manifest.json` が存在するか確認
- Chrome を再起動して再試行

#### 2. サイドバーが表示されない
**症状**: アイコンクリックやショートカットでサイドバーが出ない
**解決方法**:
- 拡張機能がアクティブ（有効）になっているか確認
- ページをリロードしてから再試行
- 開発者ツールのコンソールでエラーをチェック

#### 3. メッセージが保存されない
**症状**: リロード後にメッセージが消える
**解決方法**:
- Chrome の設定で拡張機能に「ストレージ」権限が付与されているか確認
- `chrome://settings/content/cookies` でローカルデータの保存が許可されているか確認

#### 4. レイアウトが崩れる
**症状**: ページのレイアウトが正しく調整されない
**解決方法**:
- サイト固有のCSS競合の可能性
- 開発者ツールで `body` の `margin-right` が 360px になっているか確認
- MVP では一部サイトでの競合は許容範囲

## 🔍 デバッグ方法

### 開発者ツールでのデバッグ

#### バックグラウンドスクリプト
1. `chrome://extensions/` を開く
2. 拡張機能の「サービスワーカー」をクリック
3. DevTools が開く

#### コンテンツスクリプト
1. 対象ページで右クリック → 検証
2. Console タブでエラーをチェック
3. Elements タブで `#twpp-sidebar-container` が存在するか確認

### ログ出力
- コンソールに `TWPP:` で始まるログが出力される
- エラーが発生した場合は詳細な情報が表示される

## 📈 受け入れ条件チェックリスト

仕様書に基づく受け入れ条件：

- [ ] **表示**: 任意のページでトグル操作により右サイドバーが表示/非表示できる
- [ ] **レイアウト**: サイドバー表示中、ページ本文がサイドバー幅分だけ左に収まる
- [ ] **投稿**: 入力 → Enter でメッセージがタイムライン末尾に表示・保存される
- [ ] **永続化**: ページを再読み込みしても表示状態とメッセージ履歴が復元される
- [ ] **権限**: `storage` 以外の権限を要求しない

## 📝 テスト結果記録

### テスト実施日時
実施日: __________ 実施者: __________

### テスト結果
| テスト項目 | 結果 | 備考 |
|-----------|------|------|
| 基本表示・非表示 | ⭕ / ❌ |  |
| メッセージ投稿 | ⭕ / ❌ |  |
| データ永続化 | ⭕ / ❌ |  |
| Google での動作 | ⭕ / ❌ |  |
| YouTube での動作 | ⭕ / ❌ |  |
| GitHub での動作 | ⭕ / ❌ |  |

### 発見された問題
1. 
2. 
3. 

### 総合評価
- [ ] **合格**: すべての基本機能が正常動作
- [ ] **条件付き合格**: 軽微な問題はあるが主要機能は動作
- [ ] **不合格**: 主要機能に問題あり

---
**注意**: このMVP版は1時間での実装を前提としているため、一部サイトでのCSS競合や細かいUIの調整は将来バージョンで対応予定です。